<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
<title>FuelIndeed - Fuel Station Dashboard</title>

<meta name="viewport" content="width=device-width, initial-scale=1">

<link
	href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css"
	rel="stylesheet">
<link
	href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css"
	rel="stylesheet">

<style>
body {
	background: #f4f6f9;
	overflow-x: hidden;
}

/* SIDEBAR */
#sidebar {
	width: 240px;
	min-height: 100vh;
	background: #0b1e33;
	transition: 0.3s;
}

#sidebar.collapsed {
	width: 75px;
}

#sidebar .nav-link {
	color: #cfd8dc;
	padding: 14px 20px;
	display: flex;
	align-items: center;
	gap: 12px;
}

#sidebar .nav-link:hover, #sidebar .nav-link.active {
	background: #163a5f;
	color: white;
}

#sidebar.collapsed .nav-text {
	display: none;
}

/* TOPBAR */
.topbar {
	height: 70px;
	background: white;
	box-shadow: 0 2px 6px rgba(0, 0, 0, 0.05);
}

/* WELCOME */
.welcome-box {
	background: linear-gradient(135deg, #0b1e33, #1f4e79);
	color: white;
	border-radius: 15px;
	padding: 25px;
}

/* STAT CARDS */
.stat-card {
	border: none;
	border-radius: 16px;
	color: white;
	padding: 20px;
}

.bg-pending {
	background: linear-gradient(135deg, #ff9800, #ffb74d);
}

.bg-assigned {
	background: linear-gradient(135deg, #2196f3, #64b5f6);
}

.bg-delivered {
	background: linear-gradient(135deg, #4caf50, #81c784);
}

.bg-rejected {
	background: linear-gradient(135deg, #f44336, #e57373);
}

/* RECENT ACTIVITY */
.activity-card {
	background: white;
	border-radius: 16px;
}

/* STATUS BADGE */
.badge-status {
	padding: 6px 12px;
	border-radius: 20px;
	font-size: 0.8rem;
}

.badge-PENDING {
	background: #fff3cd;
	color: #856404;
}

.badge-ASSIGNED {
	background: #cce5ff;
	color: #004085;
}

.badge-DELIVERED {
	background: #d4edda;
	color: #155724;
}

.badge-REJECTED {
	background: #f8d7da;
	color: #721c24;
}

/* PROFILE */
.profile-dropdown {
	position: relative;
	cursor: pointer;
}

.profile-dropdown-menu {
	position: absolute;
	right: 0;
	top: 120%;
	background: white;
	border-radius: 14px;
	box-shadow: 0 10px 30px rgba(0, 0, 0, 0.18);
	display: none;
	min-width: 170px;
	z-index: 100;
}

.profile-dropdown-menu a {
	display: block;
	padding: 12px 16px;
	color: #0b1e33;
	text-decoration: none;
}

.profile-dropdown-menu a:hover {
	background: #f1f5f9;
}

/* STAT ICONS */
.stat-icon {
	font-size: 36px;
	opacity: 0.85;
}

/* COLOR THEMES */
.bg-pending {
	background: linear-gradient(135deg, #fbbf24, #f59e0b);
	color: white;
}

.bg-assigned {
	background: linear-gradient(135deg, #3b82f6, #2563eb);
	color: white;
}

.bg-delivered {
	background: linear-gradient(135deg, #22c55e, #16a34a);
	color: white;
}

.bg-rejected {
	background: linear-gradient(135deg, #ef4444, #dc2626);
	color: white;
}

/* CARD POLISH */
.stat-card {
	padding: 22px;
	border-radius: 16px;
	transition: 0.3s;
}

.stat-card:hover {
	transform: translateY(-6px);
}
</style>
</head>

<body>

	<div class="d-flex">

		<!-- SIDEBAR -->
		<div id="sidebar" class="p-3">
			<div class="text-center text-white mb-4">
				<span class="nav-text fw-bold">FuelIndeed</span>
			</div>

			<ul class="nav flex-column">
				<li><a href="#" class="nav-link" onclick="toggleSidebar()">
						<i class="fas fa-bars"></i> <span class="nav-text">Menu</span>
				</a></li>

				<li><a th:href="@{/station/dashboard}" class="nav-link active">
						<i class="fas fa-home"></i> <span class="nav-text">Dashboard</span>
				</a></li>

				<li><a th:href="@{/station/bookings/pending}" class="nav-link">
						<i class="fas fa-clock"></i> <span class="nav-text">Pending</span>
				</a></li>

				<li><a th:href="@{/station/bookings/assigned}" class="nav-link">
						<i class="fas fa-truck"></i> <span class="nav-text">Assigned</span>
				</a></li>

				<li><a th:href="@{/station/bookings/delivered}"
					class="nav-link"> <i class="fas fa-check-circle"></i> <span
						class="nav-text">Delivered</span>
				</a></li>

				<li><a th:href="@{/station/bookings/rejected}" class="nav-link">
						<i class="fas fa-times-circle"></i> <span class="nav-text">Rejected</span>
				</a></li>
			</ul>
		</div>

		<!-- MAIN CONTENT -->
		<div class="flex-grow-1">

			<!-- TOPBAR -->
			<div
				class="topbar d-flex justify-content-between align-items-center px-4">
				<div class="d-flex align-items-center gap-2">
					<i class="fas fa-gas-pump me-2 text-primary"></i> <span
						class="fw-semibold text-dark">  Fuel Inventory Overview</span> </span>
				</div>
				<div class="profile-dropdown" onclick="toggleProfileMenu()">
					<i class="fas fa-user-circle fs-3 text-secondary"></i>
					<div class="profile-dropdown-menu" id="profileMenu">
						<a th:href="@{/station/complete-profile}"> <i
							class="fas fa-user me-2"></i>My Profile
						</a> <a th:href="@{/station/logout}"> <i
							class="fas fa-sign-out-alt me-2"></i>Logout
						</a>
					</div>
				</div>
			</div>

			<div class="container-fluid p-4">


				<!-- STATS -->
				<div class="row g-4 mb-4">

					<div class="col-md-3">
						<div
							class="stat-card bg-pending d-flex justify-content-between align-items-center">
							<div>
								<h6>Pending</h6>
								<h3 th:text="${pendingCount}">0</h3>
							</div>
							<i class="fas fa-clock stat-icon"></i>
						</div>
					</div>

					<div class="col-md-3">
						<div
							class="stat-card bg-assigned d-flex justify-content-between align-items-center">
							<div>
								<h6>Assigned</h6>
								<h3 th:text="${assignedCount}">0</h3>
							</div>
							<i class="fas fa-user-check stat-icon"></i>
						</div>
					</div>

					<div class="col-md-3">
						<div
							class="stat-card bg-delivered d-flex justify-content-between align-items-center">
							<div>
								<h6>Delivered</h6>
								<h3 th:text="${deliveredCount}">0</h3>
							</div>
							<i class="fas fa-truck stat-icon"></i>
						</div>
					</div>

					<div class="col-md-3">
						<div
							class="stat-card bg-rejected d-flex justify-content-between align-items-center">
							<div>
								<h6>Rejected</h6>
								<h3 th:text="${rejectedCount}">0</h3>
							</div>
							<i class="fas fa-times-circle stat-icon"></i>
						</div>
					</div>

				</div>

				<div class="activity-card p-4 shadow-sm mt-4">

					<div class="d-flex justify-content-between align-items-center mb-4">
						<div class="d-flex align-items-center gap-2">
					 <span
						class="fw-semibold text-dark"> Fuel Stock Status</span> </span>
				</div>

						<span class="badge bg-light text-dark"> <i
							class="fas fa-clock me-1"></i> <span
							th:text="${station.lastUpdated != null ?
                #temporals.format(station.lastUpdated,'dd MMM yyyy HH:mm') :
                'Not updated yet'}">
						</span>
						</span>
					</div>

					<!-- PETROL ROW -->
					<div class="row mb-4">
						<div class="col-12">
							<div class="card border-0 shadow-sm">
								<div class="card-body">

									<div
										class="d-flex justify-content-between align-items-center mb-2">
										<h6 class="fw-bold mb-0">Petrol</h6>

										<span class="badge"
											th:classappend="${station.petrolQty > 0} ?
                              ' bg-success' : ' bg-danger'">
											<span
											th:text="${station.petrolQty > 0 ?
                            'Available' : 'Out of Stock'}"></span>
										</span>
									</div>

									<h3 class="fw-bold text-primary">
										<span th:text="${station.petrolQty}">0</span> L
									</h3>

									<p class="text-muted mb-2">
										Rate: ₹<span th:text="${station.petrolRate}"></span>/L
									</p>

									<div class="progress">
										<div class="progress-bar bg-success" role="progressbar"
											th:style="'width:' + (${station.petrolQty} / 5000 * 100) + '%'">
										</div>
									</div>

								</div>
							</div>
						</div>
					</div>

					<!-- DIESEL ROW -->
					<div class="row">
						<div class="col-12">
							<div class="card border-0 shadow-sm">
								<div class="card-body">

									<div
										class="d-flex justify-content-between align-items-center mb-2">
										<h6 class="fw-bold mb-0">Diesel</h6>

										<span class="badge"
											th:classappend="${station.dieselQty > 0} ?
                              ' bg-success' : ' bg-danger'">
											<span
											th:text="${station.dieselQty > 0 ?
                            'Available' : 'Out of Stock'}"></span>
										</span>
									</div>

									<h3 class="fw-bold text-warning">
										<span th:text="${station.dieselQty}">0</span> L
									</h3>

									<p class="text-muted mb-2">
										Rate: ₹<span th:text="${station.dieselRate}"></span>/L
									</p>

									<div class="progress">
										<div class="progress-bar bg-warning" role="progressbar"
											th:style="'width:' + (${station.dieselQty} / 5000 * 100) + '%'">
										</div>
									</div>

								</div>
							</div>
						</div>
					</div>

				</div>
			</div>
		</div>
	</div>

	<script>
		function toggleSidebar() {
			document.getElementById("sidebar").classList.toggle("collapsed");
		}
		function toggleProfileMenu() {
			const menu = document.getElementById("profileMenu");
			menu.style.display = menu.style.display === "block" ? "none"
					: "block";
		}
	</script>

</body>
</html>